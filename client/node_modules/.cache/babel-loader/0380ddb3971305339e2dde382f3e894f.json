{"ast":null,"code":"var _jsxFileName = \"/Users/mohamednasr/Desktop/web/projects/invoce_app/client/src/components/Form/FormModal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { createInvoice, updateInvoice } from '../../actions/invoices';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toggleFormShow, handleCurrentId } from '../../actions/themeMode';\nimport useStyles from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FormModal = () => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const showForm = useSelector(state => state.GlobalState.showForm);\n  const currentId = useSelector(state => state.GlobalState.currentId);\n  const invoice = useSelector(state => currentId ? state.GlobalState.invoices.find(invoice => invoice._id === currentId) : null);\n  const data = {\n    createdAt: '',\n    paymentDue: '',\n    description: '',\n    paymentTerms: '',\n    clientName: '',\n    clientEmail: '',\n    status: 'pending',\n    senderAddress: {\n      street: '',\n      city: '',\n      postCode: '',\n      country: ''\n    },\n    clientAddress: {\n      street: '',\n      city: '',\n      postCode: '',\n      country: ''\n    },\n    items: [],\n    total: 0\n  };\n  const [invoiceData, setInvocieData] = useState(data);\n\n  const addItemField = () => {\n    const emptyInput = invoiceData.items.find(item => !item.name);\n\n    if (emptyInput) {\n      setItemError(true);\n      setTimeout(() => {\n        setItemError(false);\n      }, 1500);\n    } else {\n      setInvocieData({ ...invoiceData,\n        items: [...invoiceData.items, {\n          name: '',\n          quantity: 0,\n          price: 0,\n          total: 0\n        }]\n      });\n    }\n  };\n\n  const onDeleteItem = id => {\n    const newItems = invoiceData.items.filter(item => item._id !== id);\n    setInvocieData({ ...invoiceData,\n      items: newItems\n    });\n  };\n\n  const handleChangeItemValue = (e, i) => {\n    const inputName = e.target.name;\n    let value = e.target.value;\n    const newItems = invoiceData.items.map((item, idx) => idx === invoiceData.items.indexOf(i) ? inputName === 'name' ? { ...item,\n      name: value\n    } : { ...item,\n      [inputName]: Number(value),\n      total: inputName === 'price' ? value * item.quantity : value * item.price\n    } : item);\n    setInvocieData({ ...invoiceData,\n      items: newItems,\n      total: newItems.map(item => Number(item.total)).reduce((acc, currentValue) => acc + currentValue)\n    });\n  };\n\n  const clear = () => {\n    dispatch(handleCurrentId(null));\n    setInvocieData(data);\n  };\n\n  const getDueDate = (created, paymentTerms) => {\n    const date = new Date(created);\n    const dueDate = new Date(date.setDate(date.getDate() + paymentTerms)).toISOString().split('T')[0];\n    return dueDate;\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n\n    if (currentId) {\n      dispatch(updateInvoice(currentId, invoiceData));\n      dispatch(handleCurrentId(null));\n      history.push('/');\n    } else {\n      dispatch(createInvoice(invoiceData));\n    }\n\n    dispatch(toggleFormShow());\n    clear();\n  };\n\n  useEffect(() => {\n    if (invoice) setInvocieData(invoice);\n    if (!currentId) clear(); // eslint-disable-next-line\n  }, [currentId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: showForm ? 'block' : 'none'\n    },\n    className: classes.root\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FormModal, \"yXs6eEQiHW6wRXjYlcx+FVt7wzQ=\", false, function () {\n  return [useStyles, useHistory, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = FormModal;\nexport default FormModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormModal\");","map":{"version":3,"sources":["/Users/mohamednasr/Desktop/web/projects/invoce_app/client/src/components/Form/FormModal.js"],"names":["React","useState","useEffect","useHistory","createInvoice","updateInvoice","useDispatch","useSelector","toggleFormShow","handleCurrentId","useStyles","FormModal","classes","history","dispatch","showForm","state","GlobalState","currentId","invoice","invoices","find","_id","data","createdAt","paymentDue","description","paymentTerms","clientName","clientEmail","status","senderAddress","street","city","postCode","country","clientAddress","items","total","invoiceData","setInvocieData","addItemField","emptyInput","item","name","setItemError","setTimeout","quantity","price","onDeleteItem","id","newItems","filter","handleChangeItemValue","e","i","inputName","target","value","map","idx","indexOf","Number","reduce","acc","currentValue","clear","getDueDate","created","date","Date","dueDate","setDate","getDate","toISOString","split","onSubmit","preventDefault","push","display","root"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { createInvoice, updateInvoice } from '../../actions/invoices';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toggleFormShow, handleCurrentId } from '../../actions/themeMode';\n\nimport useStyles from './styles';\n\nconst FormModal = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const showForm = useSelector((state) => state.GlobalState.showForm);\n  const currentId = useSelector((state) => state.GlobalState.currentId);\n  const invoice = useSelector((state) =>\n    currentId\n      ? state.GlobalState.invoices.find((invoice) => invoice._id === currentId)\n      : null\n  );\n\n  const data = {\n    createdAt: '',\n    paymentDue: '',\n    description: '',\n    paymentTerms: '',\n    clientName: '',\n    clientEmail: '',\n    status: 'pending',\n\n    senderAddress: {\n      street: '',\n      city: '',\n      postCode: '',\n      country: '',\n    },\n    clientAddress: {\n      street: '',\n      city: '',\n      postCode: '',\n      country: '',\n    },\n    items: [],\n    total: 0,\n  };\n\n  const [invoiceData, setInvocieData] = useState(data);\n\n  const addItemField = () => {\n    const emptyInput = invoiceData.items.find((item) => !item.name);\n    if (emptyInput) {\n      setItemError(true);\n      setTimeout(() => {\n        setItemError(false);\n      }, 1500);\n    } else {\n      setInvocieData({\n        ...invoiceData,\n        items: [\n          ...invoiceData.items,\n          {\n            name: '',\n            quantity: 0,\n            price: 0,\n            total: 0,\n          },\n        ],\n      });\n    }\n  };\n\n  const onDeleteItem = (id) => {\n    const newItems = invoiceData.items.filter((item) => item._id !== id);\n    setInvocieData({ ...invoiceData, items: newItems });\n  };\n\n  const handleChangeItemValue = (e, i) => {\n    const inputName = e.target.name;\n    let value = e.target.value;\n\n    const newItems = invoiceData.items.map((item, idx) =>\n      idx === invoiceData.items.indexOf(i)\n        ? inputName === 'name'\n          ? { ...item, name: value }\n          : {\n              ...item,\n              [inputName]: Number(value),\n              total:\n                inputName === 'price'\n                  ? value * item.quantity\n                  : value * item.price,\n            }\n        : item\n    );\n\n    setInvocieData({\n      ...invoiceData,\n      items: newItems,\n      total: newItems\n        .map((item) => Number(item.total))\n        .reduce((acc, currentValue) => acc + currentValue),\n    });\n  };\n\n  const clear = () => {\n    dispatch(handleCurrentId(null));\n    setInvocieData(data);\n  };\n\n  const getDueDate = (created, paymentTerms) => {\n    const date = new Date(created);\n    const dueDate = new Date(date.setDate(date.getDate() + paymentTerms))\n      .toISOString()\n      .split('T')[0];\n\n    return dueDate;\n  };\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n\n    if (currentId) {\n      dispatch(updateInvoice(currentId, invoiceData));\n      dispatch(handleCurrentId(null));\n      history.push('/');\n    } else {\n      dispatch(createInvoice(invoiceData));\n    }\n\n    dispatch(toggleFormShow());\n    clear();\n  };\n\n  useEffect(() => {\n    if (invoice) setInvocieData(invoice);\n\n    if (!currentId) clear();\n\n    // eslint-disable-next-line\n  }, [currentId]);\n  return (\n    <div\n      style={{ display: showForm ? 'block' : 'none' }}\n      className={classes.root}\n    ></div>\n  );\n};\n\nexport default FormModal;\n"]},"metadata":{},"sourceType":"module"}